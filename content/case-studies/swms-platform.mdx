---
title: SWMS Platform
description: Event-driven waste management platform automating C&D recycling operations through device orchestration and real-time trip lifecycle management.
date: 2021-01-01
tags:
  - Industrial IoT
  - .NET Core
  - Microservices
  - Temporal.io
  - Hardware Integration
featured: true
client: Sustainability Solutions Co.
role: System Architect
duration: 4 years (architecture)
stack:
  - .NET Core
  - Entity Framework Core
  - Temporal.io
  - Angular
  - Next.js
  - React Native
  - PostgreSQL
  - MongoDB
  - Redis
  - Kubernetes
---

## Problem

Manual tracking of waste trucks through recycling facilities led to inconsistent data, unauthorized access, and inaccurate weight measurements. Operators relied on paper-based logs and disconnected software systems. Weight discrepancies were common, and there was no real-time visibility into facility throughput.

The core challenge was converting physical device events—license plate recognition, RFID detection, scale weight readings—into authoritative trip records with automated state progression.

## Solution

Design an event-driven platform that orchestrates physical device events into automated trip lifecycles. The system converts device detections into trip state transitions without manual intervention, enforcing authorization rules at every checkpoint.

### Architectural Layers

The system operates across four architectural layers:

**Foundation Layer** establishes system infrastructure through dynamic configuration management, user authentication with role-based access control, and facility registry that defines where devices are installed and pricing models apply.

**Supporting Layer** defines authorization frameworks—contract-based vehicle access permissions and vehicle registration for automated trip flow—that enable operational modules to function.

**Core Operations Layer** orchestrates vehicle movement lifecycles through device detection and weight capture correlation, manages physical device event processing, tracks material inventory, and processes financial transactions.

**Intelligence Layer** transforms operational data into decision-support systems through real-time dashboards, compliance reporting with audit trails, and predictive analytics.

## Architecture

### Backend (.NET Core Microservices)

Domain-driven design with event-sourced workflow states. Each device event is recorded as an immutable record, enabling full audit trails and state reconstruction. Temporal.io orchestrates durable workflows for long-running trip lifecycle management.

```
src/
├── Services/
│   ├── Trip.Service/
│   ├── Vehicle.Service/
│   ├── Contract.Service/
│   ├── Device.Service/
│   └── Payment.Service/
├── Infrastructure/
│   ├── Hardware/
│   │   ├── ZKTeco/
│   │   ├── Hikvision/
│   │   └── ScaleIndicators/
│   └── Persistence/
└── Shared/
    └── Domain/
```

### Hardware Integration Layer

Multi-vendor abstraction enables interchangeable hardware components:

- **Access Control**: ZKTeco SDK for barrier gates and RFID readers
- **Vehicle Recognition**: Hikvision ISAPI for ANPR plate detection
- **Weight Capture**: Protocol adapters for Mettler Toledo, Avery Weigh-Tronix, Dini Argeo scale indicators

### Device-to-Trip Correlation

Scale indicators report numeric weight values without identifying the source vehicle. The system correlates weights to trips by detecting the vehicle (LPR/UHF/QR) at each scale location—inbound detection at main gate cannot be assumed to correlate with scale readings.

### Real-time Processing

Redis pub/sub broadcasts workflow state changes to connected clients. WebSocket connections maintain live dashboard updates across Admin Portal (Angular), Client Portal (Next.js), and Mobile App (React Native).

## Results

- Device events automatically initiate and progress trips through lifecycle states
- Contract-based authorization enforces access rules at every checkpoint
- Weight correlation engine matches scale readings to active trips
- Event-sourced architecture provides complete audit trail for regulatory compliance
- Multi-vendor hardware layer enables interchangeable device components
- Multi-platform frontend serves operators, clients, and mobile users
